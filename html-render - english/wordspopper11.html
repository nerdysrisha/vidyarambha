<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Word Popper Panel</title>
<style>
html, body {
    margin: 0;
    height: 100%;
    background: black;
    color: white;
    font-family: Arial, sans-serif;
    overflow: hidden;
}

#outer {
    margin: 20px;
    height: calc(100vh - 40px);
    display: flex;
    flex-direction: column;
    gap: 20px;
}

/* CONTROL PANEL */
#control-container {
    display: flex;
    flex-direction: column;
    transition: flex-basis 0.3s ease, min-height 0.3s ease;
    min-height: 40px;
    overflow: hidden;
    border: 1px solid #444;
    padding: 8px;
}

#control-container.shrink {
    flex-basis: 40px;
    min-height: 40px;
    padding: 4px 8px;
}
 

#patternSelector {
    padding: 4px 8px;
    font-size: 14px;
    background: #111;
    color: #fff;
    border: 1px solid #444;
    cursor: pointer;
}

#counter {
    margin-left: auto;
    color: #aaa;
}

/* PANELS */
#panels {
    display: grid;
    grid-template-columns: 4fr 1fr;
    gap: 12px;
    flex: 1;
    min-height: 0;
}

/* CENTER (WORD) BOX */
#center {
    border: 1px solid #222;
    background: #111;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    font-weight: bold;
    font-size: clamp(20px, 8vw, 100px);
    overflow: hidden;
    padding: 12px;
}

/* LEFT (HISTORY) BOX */
#left {
    border: 1px solid #222;
    background: #111;
    display: flex;
    flex-direction: column;
    padding: 12px;
    overflow-y: auto;
}

/* WORD + EMOJI STACK */
.word-container {
    display: flex;
    flex-direction: column;
    align-items: center;
}

.emoji {
    width: 120px;
    height: 120px;
    margin-top: 10px;
}

/* Scrollbars */
#left::-webkit-scrollbar {
    width: 10px;
}

#left::-webkit-scrollbar-track {
    background: #111;
}

#left::-webkit-scrollbar-thumb {
    background-color: #555;
    border-radius: 6px;
    border: 2px solid #111;
}

#left::-webkit-scrollbar-thumb:hover {
    background-color: #888;
}

/* BUTTONS */
button {
    padding: 4px 8px;
    border: none;
    cursor: pointer;
    background: #58D68D;
    color: black;
}
</style>
</head>
<body>

<div id="outer">

    <!-- CONTROL PANEL -->
    <div id="control-container" class="shrink">
        <div id="control-top-bar">
 
            <select id="patternSelector">
                <option value="2-letter">2 Letter Words</option>
                <option value="3-letter" selected>3 Letter Words</option>
                <option value="4-letter">4 Letter Words</option>
                <option value="5-letter">5 Letter Words</option>
                <option value="actionitems">Action Items</option>
                <option value="animals">Animals</option>
                <option value="body-actions">Body Actions</option>
                <option value="bodyparts">Body Parts</option>
                <option value="clothing">Clothing</option>
                <option value="colors">Colors</option>
                <option value="emotions">Emotions</option>
                <option value="family">Family</option>
                <option value="fooditems">Food Items</option>
                <option value="fruits">Fruits</option>
                <option value="houseitems">House Items</option>
                <option value="kitchen">Kitchen</option>
                <option value="months-days-time">Months/Days/Time</option>
                <option value="nature">Nature</option>
                <option value="numbernames">Number Names</option>
                <option value="opposite">Opposites</option>
                <option value="playground">Playground</option>
                <option value="professions">Professions</option>
                <option value="school">School</option>
                <option value="shapes">Shapes</option>
                <option value="vegetables">Vegetables</option>
                <option value="vehicles">Vehicles</option>
                <option value="weather">Weather</option>
            </select>
            <div id="counter">0 / 0</div>
        </div>
    </div>

    <!-- PANELS: CENTER + LEFT -->
    <div id="panels">
        <div id="center"></div>
        <div id="left"></div>
    </div>

</div>

<script>
let words=[], leftWords=[], centerWord=null, totalWords=0;

const centerBox = document.getElementById('center');
const leftBox = document.getElementById('left');
const counterEl = document.getElementById('counter');
const patternSelector = document.getElementById('patternSelector');

const EMOJI_COUNT = 55;
function getRandomEmojiUrl() {
    const n = Math.floor(Math.random()*EMOJI_COUNT)+1;
    return `https://raw.githubusercontent.com/nerdysrisha/vidyarambha/main/emojis/emoji${n}.gif`;
}

function getJsonUrl(p){
    return `https://raw.githubusercontent.com/nerdysrisha/vidyarambha/main/english/${p}-words.json`;
}

function loadWords(p){
    fetch(getJsonUrl(p))
    .then(r=>r.json())
    .then(d=>{
        words=d;
        totalWords=d.length;
        leftWords=[];
        centerWord=null;
        leftBox.innerHTML='';
        centerBox.innerHTML='ðŸ˜ƒ';
        counterEl.textContent=`0 / ${totalWords}`;
        nextWord();
        centerBox.focus();
    })
    .catch(err=>console.error("Failed to load words:",err));
}

function speakWord(w){
    const u=new SpeechSynthesisUtterance(w);
    u.lang='en-US';
    speechSynthesis.speak(u);
}

function randomColor(){
    return `rgb(${Math.random()*255|0},${Math.random()*255|0},${Math.random()*255|0})`;
}

function renderLeft(){
    leftBox.innerHTML='';
    leftWords.forEach(w=>{
        const d=document.createElement('div');
        d.textContent=w;
        leftBox.appendChild(d);
    });
    leftBox.scrollTop=leftBox.scrollHeight;
}

function nextWord(){
    if(!centerWord && !words.length) return;

    if(centerWord){
        speakWord(centerWord);
        setTimeout(()=>{
            leftWords.push(centerWord);
            counterEl.textContent=`${leftWords.length} / ${totalWords}`;
            renderLeft();

            if(!words.length){
                centerWord=null;
                centerBox.innerHTML='ðŸŽ‰';
                return;
            }

            centerWord = words.splice(Math.random()*words.length|0, 1)[0];
            centerBox.innerHTML = `
                <div class="word-container">
                    <span class="word" style="color:${randomColor()}">${centerWord}</span>
                    <img class="emoji" src="${getRandomEmojiUrl()}">
                </div>
            `;
        }, 1000);
    } else {
        centerWord = words.splice(Math.random()*words.length|0, 1)[0];
        centerBox.innerHTML = `
            <div class="word-container">
                <span class="word" style="color:${randomColor()}">${centerWord}</span>
                <img class="emoji" src="${getRandomEmojiUrl()}">
            </div>
        `;
    }
}

patternSelector.addEventListener('change',()=>{ loadWords(patternSelector.value); centerBox.focus(); });
document.body.addEventListener('keydown',e=>{ if(e.code==='Space'||e.code==='Enter') nextWord(); });

loadWords(patternSelector.value);

 
</script>
</body>
</html>
